1. **멀티 프로세스와 멀티 스레드의 개념과 각각의 장단점을 설명해주세요.**

멀티 프로세스는 1개 이상의 프로세스를 동시적으로 실행하여 병렬 처리를 구현하는 방식입니다. 각 프로세스는 자체 메모리 공간(Heap, Stack, Code, Data)을 가지고 있으며, 프로세스 간 통신을 위해 IPC(Inter-Process Communication) 메커니즘을 사용합니다.

장점

- 각 프로세스는 독립적인 메모리 공간을 가지므로 하나의 프로세스가 실패하더라도 다른 프로세스에 영향을 미치지 않습니다.
- 프로세스에서 오류가 발생해도 다른 프로세스에 치명적인 영향을 미치지 않습니다.

단점

- 프로세스마다 메모리 공간을 유지하기 때문에 메모리 오버헤드가 크고, 메모리 공유가 어렵습니다.
- Context Switching 소요 시간이 다소 길게 발생합니다.

<br><br>

멀티 스레드는 프로세스 내 작업을 여러 개의 스레드로 처리하는 기법입니다. 코드, 데이터 스택, 힙을 각각 생성하는 프로세스와는 달리 스레드는 코드, 데이터, 힙은 스레드끼리 서로 공유하게 됩니다.

장점

- 스레드끼리 서로 자원을 공유하기 때문에 효율성이 높습니다.
- 서로 독립적인 작업들을 작은 단위로 나누고 동신에 실행되는 것처럼 보여주는 동시성에 효과적입니다.

단점

- 한 스레드에 문제가 생기면 다른 스레드에도 영향을 끼쳐 스레드로 이루어져 있는 프로세스에 영향을 줄 수 있는 단점이 있습니다.

<br><br>

1-1. **멀티 스레드 환경에서 스레드는 많으면 많을수록 좋을까요? 이유와 함께 답변해주세요.**

보통 시스템의 CPU Core 1개당 스레드 1개를 생성할 수 있습니다. 이에 따라 한번에 동시적으로 작업할 수 있는 스레드 수는 Core 개수로 제한이 되기 때문에 스레드 개수는 CPU 코어 개수만큼 늘리는 것은 효과적일 수 있습니다. 하지만 스레드 개수가 CPU Core 개수를 초과하게 되면 스레드 간 CPU를 점유하려는 경쟁이 발생되기 때문에 오히려 성능이 저하될 수 있습니다.

<br>

---

2. **컨텍스트 스위칭이란 무엇인지, 그리고 컨텍스트 스위칭으로 인한 문제가 무엇이 있는지 최대한 자세하게 설명해주세요.**

<br>

컨텍스트 스위칭이란 여러개의 프로세스가 실행되고 있을때 기존에 실행되던 프로세스를 중단하고 다른 프로세스를 실행하는 것입니다. 이는 PCB(Process Context Block)이라고 하는 메모리의 별도 공간에 프로세스 상태를 저장하고, 해당 값을 찾는 방법으로 구현됩니다. PCB에는 Process ID, 레지스터 값, 프로세스 상태, 메모리 사이즈를 저장합니다.

컨텍스트 스위칭은 과도하게 많이 일어날 경우 오버헤드가 발생하게 됩니다. 현재 상태를 저장 및 복원해야 하므로 메모리와 CPU 시간을 소모합니다. 그리고 컨텍스트 스위칭 중에 스레드 또는 프로세스 간의 동기화 오류나 데드락이 발생할 수 있습니다.

<br>

---

3. **데드락에 대해 설명하고, 해결 방법을 아는대로 설명해주세요.**

데드락(Deadlock)은 다중 프로세스 또는 스레드가 서로의 작업을 기다리며 무한 대기 상태에 빠진 상태를 가리킵니다. 데드락이 발생하기 위한 조건은 크게 4가지로 말할 수 있습니다.

- **상호 배제**
  - 한 번에 프로세스 하나만 해당 자원을 사용할 수 있다. 사용 중인 자원을 다른 프로세스가 사용하려면 요청한 자원이 해제될 때까지 기다려야 한다.
- **점유 대기**
  - 자원을 최소한 하나 보유하고, 다른 프로세스에 할당된 자원을 점유하기 위해 대기하는 프로세스가 존재해야 한다.
- **비선점**
  - 이미 할당된 자원을 강제로 빼앗을 수 없다.
- **순환 대기**
  - 대기 프로세스의 집합이 순환 형태로 자원을 대기하고 있어야 한다.

<br>

이를 해결하기 위해선 예방, 회피, 탐지 및 회복 4가지 측면에서의 방법이 있습니다.

1. 데드락 예방

- 데드락의 발생조건 4가지 중 하나라도 발생하지 않게 합니다.

2. 데드락 회피

- 특정한 순서로 프로세스들이 작업을 할때 데드락이 발생하지 않는 순서, Safe Sequence를 보장하게 합니다. 그리고 프로세스들이 요청하는 모든 자원을 데드락 발생없이 차례로 모두에게 할당해 줄 수 있는 Safe State에 있도록 자원을 할당합니다. 이러한 Safe State에 있을 수 있도록 하는 대표적인 회피 알고리즘으로 은행원 알고리즘이 있습니다.

3. 데드락 탐지 및 회복

- 탐지 기법

  - 현재 시스템의 자원 할당 상태를 가지고 파악합니다. Allocation, Request, Available 등으로 시스템에 데드락이 발생했는지 여부를 탐색할 수 있습니다.

- 회복 기법

  - 프로세스를 1개 이상 중단시켜 순환 대기에서 벗어나도록 유도합니다.
  - 프로세스에 할당된 자원을 선점해서 교착 상태를 해결할 때까지 그 자원을 다른 프로세스에 할당해줍니다.
